a9f6e0ab044916e18b2e214c9a84530c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dto_1 = require("../dto");
class Coordinate {
    x;
    y;
    constructor(coordinate) {
        this.x = coordinate.x;
        this.y = coordinate.y;
    }
    toString() {
        return `(${this.x};${this.y})`;
    }
    /** @deprecated use equals instead */
    is(coordinate) {
        return this.x === coordinate.x && this.y === coordinate.y;
    }
    equals(coordinate) {
        return Coordinate.equals(this, coordinate);
    }
    static equals(a, b) {
        return !!a && !!b && a.x === b.x && a.y === b.y;
    }
    plus(coordinate) {
        return new Coordinate(Coordinate.plus(this, coordinate));
    }
    static plus(a, b) {
        return {
            x: a.x + b.x,
            y: a.y + b.y,
        };
    }
    minus(coordinate) {
        const x = this.x - coordinate.x;
        const y = this.y - coordinate.y;
        return new Coordinate({ x, y });
    }
    plusDirection(direction, distance) {
        return new Coordinate(Coordinate.plusDirection(this, direction, distance));
    }
    static plusDirection(coordinate, direction, distance) {
        return {
            x: coordinate.x + direction.x * distance,
            y: coordinate.y + direction.y * distance,
        };
    }
    normalized() {
        if (this.getLength() === 0) {
            return new Coordinate({ x: 0, y: 0 });
        }
        const x = this.x / this.getLength();
        const y = this.y / this.getLength();
        return new Coordinate({ x, y });
    }
    floored() {
        return new Coordinate(Coordinate.floored(this));
    }
    static floored(coordinate) {
        return {
            x: Math.floor(coordinate.x),
            y: Math.floor(coordinate.y),
        };
    }
    getLength() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
    }
    get neighbors() {
        return Coordinate.getNeighbors(this).map((simpleNeighbor) => new Coordinate(simpleNeighbor));
    }
    static getNeighbors(coordinate) {
        return [
            { x: coordinate.x - 1, y: coordinate.y },
            { x: coordinate.x + 1, y: coordinate.y },
            { x: coordinate.x, y: coordinate.y - 1 },
            { x: coordinate.x, y: coordinate.y + 1 },
        ];
    }
    isNeighbor(coordinate) {
        return Coordinate.isNeighbor(this, coordinate);
    }
    static isNeighbor(a, b) {
        return Math.abs(a.x - b.x) + Math.abs(a.y - b.y) === 1;
    }
    toDTO() {
        return Coordinate.toDTO(this);
    }
    static toDTO(coordinate) {
        const dto = new dto_1.CoordinateDTO();
        dto.x = coordinate.x;
        dto.y = coordinate.y;
        return dto;
    }
}
exports.default = Coordinate;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEdpdGh1YlxcQWxnb29cXGNvcmVcXHNyY1xcYm9hcmRcXENvb3JkaW5hdGUudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxnQ0FBb0Q7QUFJcEQsTUFBcUIsVUFBVTtJQUNwQixDQUFDLENBQVM7SUFDVixDQUFDLENBQVM7SUFFbkIsWUFBWSxVQUE0QjtRQUN0QyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxxQ0FBcUM7SUFDckMsRUFBRSxDQUFDLFVBQTRCO1FBQzdCLE9BQU8sSUFBSSxDQUFDLENBQUMsS0FBSyxVQUFVLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsTUFBTSxDQUFDLFVBQTRCO1FBQ2pDLE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBK0IsRUFBRSxDQUErQjtRQUM1RSxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRCxJQUFJLENBQUMsVUFBNEI7UUFDL0IsT0FBTyxJQUFJLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQW1CLEVBQUUsQ0FBbUI7UUFDbEQsT0FBTztZQUNMLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ1osQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDYixDQUFDO0lBQ0osQ0FBQztJQUVELEtBQUssQ0FBQyxVQUE0QjtRQUNoQyxNQUFNLENBQUMsR0FBVyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLEdBQVcsSUFBSSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsYUFBYSxDQUFDLFNBQXFCLEVBQUUsUUFBZ0I7UUFDbkQsT0FBTyxJQUFJLFVBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBRUQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxVQUE0QixFQUFFLFNBQXFCLEVBQUUsUUFBZ0I7UUFDeEYsT0FBTztZQUNMLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsUUFBUTtZQUN4QyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLFFBQVE7U0FDekMsQ0FBQztJQUNKLENBQUM7SUFFRCxVQUFVO1FBQ1IsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDM0IsT0FBTyxJQUFJLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxHQUFXLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxHQUFXLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzVDLE9BQU8sSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsT0FBTztRQUNMLE9BQU8sSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDRCxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQTRCO1FBQ3pDLE9BQU87WUFDTCxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzNCLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7U0FDNUIsQ0FBQztJQUNKLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxVQUFVLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsSUFBSSxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztJQUMvRixDQUFDO0lBRUQsTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUE0QjtRQUM5QyxPQUFPO1lBQ0wsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLEVBQUU7WUFDeEMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLEVBQUU7WUFDeEMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDeEMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7U0FDekMsQ0FBQztJQUNKLENBQUM7SUFFRCxVQUFVLENBQUMsVUFBNEI7UUFDckMsT0FBTyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRUQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFtQixFQUFFLENBQW1CO1FBQ3hELE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsS0FBSztRQUNILE9BQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUE0QjtRQUN2QyxNQUFNLEdBQUcsR0FBRyxJQUFJLG1CQUFhLEVBQUUsQ0FBQztRQUNoQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDckIsR0FBRyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUNGO0FBM0dELDZCQTJHQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcR2l0aHViXFxBbGdvb1xcY29yZVxcc3JjXFxib2FyZFxcQ29vcmRpbmF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb29yZGluYXRlRFRPLCBEVE9GcmllbmRseSB9IGZyb20gJy4uL2R0byc7XG5cbmV4cG9ydCB0eXBlIEJhc2VDb29yZGluYXRlID0geyB4OiBudW1iZXI7IHk6IG51bWJlciB9O1xuZXhwb3J0IHR5cGUgU2ltcGxlQ29vcmRpbmF0ZSA9IEJhc2VDb29yZGluYXRlO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vcmRpbmF0ZSBpbXBsZW1lbnRzIEJhc2VDb29yZGluYXRlLCBEVE9GcmllbmRseTxDb29yZGluYXRlRFRPPiB7XG4gIHJlYWRvbmx5IHg6IG51bWJlcjtcbiAgcmVhZG9ubHkgeTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvb3JkaW5hdGU6IFNpbXBsZUNvb3JkaW5hdGUpIHtcbiAgICB0aGlzLnggPSBjb29yZGluYXRlLng7XG4gICAgdGhpcy55ID0gY29vcmRpbmF0ZS55O1xuICB9XG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCgke3RoaXMueH07JHt0aGlzLnl9KWA7XG4gIH1cblxuICAvKiogQGRlcHJlY2F0ZWQgdXNlIGVxdWFscyBpbnN0ZWFkICovXG4gIGlzKGNvb3JkaW5hdGU6IFNpbXBsZUNvb3JkaW5hdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54ID09PSBjb29yZGluYXRlLnggJiYgdGhpcy55ID09PSBjb29yZGluYXRlLnk7XG4gIH1cblxuICBlcXVhbHMoY29vcmRpbmF0ZTogU2ltcGxlQ29vcmRpbmF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBDb29yZGluYXRlLmVxdWFscyh0aGlzLCBjb29yZGluYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBlcXVhbHMoYTogU2ltcGxlQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCwgYjogU2ltcGxlQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIWEgJiYgISFiICYmIGEueCA9PT0gYi54ICYmIGEueSA9PT0gYi55O1xuICB9XG5cbiAgcGx1cyhjb29yZGluYXRlOiBTaW1wbGVDb29yZGluYXRlKTogQ29vcmRpbmF0ZSB7XG4gICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKENvb3JkaW5hdGUucGx1cyh0aGlzLCBjb29yZGluYXRlKSk7XG4gIH1cblxuICBzdGF0aWMgcGx1cyhhOiBTaW1wbGVDb29yZGluYXRlLCBiOiBTaW1wbGVDb29yZGluYXRlKTogU2ltcGxlQ29vcmRpbmF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGEueCArIGIueCxcbiAgICAgIHk6IGEueSArIGIueSxcbiAgICB9O1xuICB9XG5cbiAgbWludXMoY29vcmRpbmF0ZTogU2ltcGxlQ29vcmRpbmF0ZSk6IENvb3JkaW5hdGUge1xuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueCAtIGNvb3JkaW5hdGUueDtcbiAgICBjb25zdCB5OiBudW1iZXIgPSB0aGlzLnkgLSBjb29yZGluYXRlLnk7XG4gICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKHsgeCwgeSB9KTtcbiAgfVxuXG4gIHBsdXNEaXJlY3Rpb24oZGlyZWN0aW9uOiBDb29yZGluYXRlLCBkaXN0YW5jZTogbnVtYmVyKTogQ29vcmRpbmF0ZSB7XG4gICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKENvb3JkaW5hdGUucGx1c0RpcmVjdGlvbih0aGlzLCBkaXJlY3Rpb24sIGRpc3RhbmNlKSk7XG4gIH1cblxuICBzdGF0aWMgcGx1c0RpcmVjdGlvbihjb29yZGluYXRlOiBTaW1wbGVDb29yZGluYXRlLCBkaXJlY3Rpb246IENvb3JkaW5hdGUsIGRpc3RhbmNlOiBudW1iZXIpOiBTaW1wbGVDb29yZGluYXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogY29vcmRpbmF0ZS54ICsgZGlyZWN0aW9uLnggKiBkaXN0YW5jZSxcbiAgICAgIHk6IGNvb3JkaW5hdGUueSArIGRpcmVjdGlvbi55ICogZGlzdGFuY2UsXG4gICAgfTtcbiAgfVxuXG4gIG5vcm1hbGl6ZWQoKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGVuZ3RoKCkgPT09IDApIHtcbiAgICAgIHJldHVybiBuZXcgQ29vcmRpbmF0ZSh7IHg6IDAsIHk6IDAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHg6IG51bWJlciA9IHRoaXMueCAvIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgY29uc3QgeTogbnVtYmVyID0gdGhpcy55IC8gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICByZXR1cm4gbmV3IENvb3JkaW5hdGUoeyB4LCB5IH0pO1xuICB9XG5cbiAgZmxvb3JlZCgpIHtcbiAgICByZXR1cm4gbmV3IENvb3JkaW5hdGUoQ29vcmRpbmF0ZS5mbG9vcmVkKHRoaXMpKTtcbiAgfVxuICBzdGF0aWMgZmxvb3JlZChjb29yZGluYXRlOiBTaW1wbGVDb29yZGluYXRlKTogU2ltcGxlQ29vcmRpbmF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IE1hdGguZmxvb3IoY29vcmRpbmF0ZS54KSxcbiAgICAgIHk6IE1hdGguZmxvb3IoY29vcmRpbmF0ZS55KSxcbiAgICB9O1xuICB9XG5cbiAgZ2V0TGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xuICB9XG5cbiAgZ2V0IG5laWdoYm9ycygpOiBDb29yZGluYXRlW10ge1xuICAgIHJldHVybiBDb29yZGluYXRlLmdldE5laWdoYm9ycyh0aGlzKS5tYXAoKHNpbXBsZU5laWdoYm9yKSA9PiBuZXcgQ29vcmRpbmF0ZShzaW1wbGVOZWlnaGJvcikpO1xuICB9XG5cbiAgc3RhdGljIGdldE5laWdoYm9ycyhjb29yZGluYXRlOiBTaW1wbGVDb29yZGluYXRlKTogU2ltcGxlQ29vcmRpbmF0ZVtdIHtcbiAgICByZXR1cm4gW1xuICAgICAgeyB4OiBjb29yZGluYXRlLnggLSAxLCB5OiBjb29yZGluYXRlLnkgfSxcbiAgICAgIHsgeDogY29vcmRpbmF0ZS54ICsgMSwgeTogY29vcmRpbmF0ZS55IH0sXG4gICAgICB7IHg6IGNvb3JkaW5hdGUueCwgeTogY29vcmRpbmF0ZS55IC0gMSB9LFxuICAgICAgeyB4OiBjb29yZGluYXRlLngsIHk6IGNvb3JkaW5hdGUueSArIDEgfSxcbiAgICBdO1xuICB9XG5cbiAgaXNOZWlnaGJvcihjb29yZGluYXRlOiBTaW1wbGVDb29yZGluYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIENvb3JkaW5hdGUuaXNOZWlnaGJvcih0aGlzLCBjb29yZGluYXRlKTtcbiAgfVxuXG4gIHN0YXRpYyBpc05laWdoYm9yKGE6IFNpbXBsZUNvb3JkaW5hdGUsIGI6IFNpbXBsZUNvb3JkaW5hdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoYS54IC0gYi54KSArIE1hdGguYWJzKGEueSAtIGIueSkgPT09IDE7XG4gIH1cblxuICB0b0RUTygpIHtcbiAgICByZXR1cm4gQ29vcmRpbmF0ZS50b0RUTyh0aGlzKTtcbiAgfVxuICBzdGF0aWMgdG9EVE8oY29vcmRpbmF0ZTogU2ltcGxlQ29vcmRpbmF0ZSkge1xuICAgIGNvbnN0IGR0byA9IG5ldyBDb29yZGluYXRlRFRPKCk7XG4gICAgZHRvLnggPSBjb29yZGluYXRlLng7XG4gICAgZHRvLnkgPSBjb29yZGluYXRlLnk7XG4gICAgcmV0dXJuIGR0bztcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9