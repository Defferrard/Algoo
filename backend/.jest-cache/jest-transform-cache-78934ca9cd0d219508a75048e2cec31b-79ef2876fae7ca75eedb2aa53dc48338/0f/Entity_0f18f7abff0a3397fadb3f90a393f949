f3b97400d99cd48c736bb43713b3de94
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const uuid_1 = require("uuid");
/**
 * An entity is an object that can be placed on the board.
 */
class Entity {
    uuid = (0, uuid_1.v4)();
    resources;
    floor = false; // TODO
    playable = false; // TODO
    team;
    constructor(resources) {
        this.resources = resources;
    }
    updateResource(type, updateFunction) {
        const OLD_VALUE = this.resources[type];
        this.resources[type] = updateFunction(this.resources[type]);
        if (this.resources[type] < 0) {
            this.resources[type] = 0;
        }
        return this.resources[type] - OLD_VALUE;
    }
    pay(resources) {
        if (!this.has(resources)) {
            return false;
        }
        Object.keys(resources).forEach((resourceType) => {
            const type = resourceType;
            this.resources[type] -= resources[type];
        });
        return true;
    }
    has(resources) {
        return Object.keys(resources).every((resourceType) => {
            const type = resourceType;
            return this.resources[type] >= resources[type];
        });
    }
}
exports.default = Entity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEdpdGh1YlxcQWxnb29cXGNvcmVcXHNyY1xcYm9hcmRcXEVudGl0eS50cyIsIm1hcHBpbmdzIjoiOztBQUdBLCtCQUFvQztBQUVwQzs7R0FFRztBQUNILE1BQXFCLE1BQU07SUFDaEIsSUFBSSxHQUFXLElBQUEsU0FBTSxHQUFFLENBQUM7SUFDeEIsU0FBUyxDQUFJO0lBRXRCLEtBQUssR0FBWSxLQUFLLENBQUMsQ0FBQyxPQUFPO0lBQy9CLFFBQVEsR0FBWSxLQUFLLENBQUMsQ0FBQyxPQUFPO0lBQ2xDLElBQUksQ0FBUTtJQUVaLFlBQVksU0FBWTtRQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRUQsY0FBYyxDQUFDLElBQWtCLEVBQUUsY0FBeUM7UUFDMUUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBRSxDQUFDLENBQUM7UUFFN0QsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzlCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFFLEdBQUcsU0FBUyxDQUFDO0lBQzNDLENBQUM7SUFFRCxHQUFHLENBQUMsU0FBb0I7UUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQztZQUN6QixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksRUFBRSxFQUFFO1lBQzlDLE1BQU0sSUFBSSxHQUFpQixZQUE0QixDQUFDO1lBQ3hELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFFLElBQUksU0FBUyxDQUFDLElBQUksQ0FBRSxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsR0FBRyxDQUFDLFNBQW9CO1FBQ3RCLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFvQixFQUFFLEVBQUU7WUFDM0QsTUFBTSxJQUFJLEdBQWlCLFlBQTRCLENBQUM7WUFDeEQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBRSxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUUsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQXZDRCx5QkF1Q0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXEdpdGh1YlxcQWxnb29cXGNvcmVcXHNyY1xcYm9hcmRcXEVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlc291cmNlcyB9IGZyb20gJy4uL2dhbWUnO1xuaW1wb3J0IHsgVGVhbSB9IGZyb20gJy4uL2dhbWUnO1xuaW1wb3J0IHR5cGUgeyBSZXNvdXJjZVR5cGUgfSBmcm9tICdAZGVmZmVycmFyZC9hbGdvby1jb3JlL3NyYy9nYW1lLyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkVjQgfSBmcm9tICd1dWlkJztcblxuLyoqXG4gKiBBbiBlbnRpdHkgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHBsYWNlZCBvbiB0aGUgYm9hcmQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudGl0eTxSIGV4dGVuZHMgUmVzb3VyY2VzPiB7XG4gIHJlYWRvbmx5IHV1aWQ6IHN0cmluZyA9IHV1aWRWNCgpO1xuICByZWFkb25seSByZXNvdXJjZXM6IFI7XG5cbiAgZmxvb3I6IGJvb2xlYW4gPSBmYWxzZTsgLy8gVE9ET1xuICBwbGF5YWJsZTogYm9vbGVhbiA9IGZhbHNlOyAvLyBUT0RPXG4gIHRlYW0/OiBUZWFtO1xuXG4gIGNvbnN0cnVjdG9yKHJlc291cmNlczogUikge1xuICAgIHRoaXMucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICB9XG5cbiAgdXBkYXRlUmVzb3VyY2UodHlwZTogUmVzb3VyY2VUeXBlLCB1cGRhdGVGdW5jdGlvbjogKHZhbHVlOiBudW1iZXIpID0+IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgT0xEX1ZBTFVFID0gdGhpcy5yZXNvdXJjZXNbdHlwZV0hO1xuICAgIHRoaXMucmVzb3VyY2VzW3R5cGVdID0gdXBkYXRlRnVuY3Rpb24odGhpcy5yZXNvdXJjZXNbdHlwZV0hKTtcblxuICAgIGlmICh0aGlzLnJlc291cmNlc1t0eXBlXSEgPCAwKSB7XG4gICAgICB0aGlzLnJlc291cmNlc1t0eXBlXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc291cmNlc1t0eXBlXSEgLSBPTERfVkFMVUU7XG4gIH1cblxuICBwYXkocmVzb3VyY2VzOiBSZXNvdXJjZXMpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaGFzKHJlc291cmNlcykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMocmVzb3VyY2VzKS5mb3JFYWNoKChyZXNvdXJjZVR5cGUpID0+IHtcbiAgICAgIGNvbnN0IHR5cGU6IFJlc291cmNlVHlwZSA9IHJlc291cmNlVHlwZSBhcyBSZXNvdXJjZVR5cGU7XG4gICAgICB0aGlzLnJlc291cmNlc1t0eXBlXSEgLT0gcmVzb3VyY2VzW3R5cGVdITtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGhhcyhyZXNvdXJjZXM6IFJlc291cmNlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXNvdXJjZXMpLmV2ZXJ5KChyZXNvdXJjZVR5cGU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgdHlwZTogUmVzb3VyY2VUeXBlID0gcmVzb3VyY2VUeXBlIGFzIFJlc291cmNlVHlwZTtcbiAgICAgIHJldHVybiB0aGlzLnJlc291cmNlc1t0eXBlXSEgPj0gcmVzb3VyY2VzW3R5cGVdITtcbiAgICB9KTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9