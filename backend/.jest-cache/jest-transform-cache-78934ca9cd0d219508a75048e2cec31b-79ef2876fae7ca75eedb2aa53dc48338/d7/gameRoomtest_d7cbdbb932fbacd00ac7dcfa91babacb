e630130addf3684a95d100c9dd3a44bb
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const http_status_1 = __importDefault(require("http-status"));
const routing_controllers_1 = require("routing-controllers");
const supertest_1 = __importDefault(require("supertest"));
const typedi_1 = require("typedi");
const app_1 = require("~/app");
const BASE_URL = '/api/v1/rooms';
describe(`Base Test ${BASE_URL}`, () => {
    beforeAll(() => {
        (0, routing_controllers_1.useContainer)(typedi_1.Container);
    });
    afterEach(() => {
        typedi_1.Container.reset();
    });
    test('Create a room', async () => {
        let res = await (0, supertest_1.default)(app_1.app).get(BASE_URL).expect(http_status_1.default.OK);
        expect(res.body).toEqual([]);
        res = await (0, supertest_1.default)(app_1.app).post(BASE_URL);
        console.log(res.body);
        expect(res.body).toMatchObject({});
        const room = res.body;
        res = await (0, supertest_1.default)(app_1.app).get(BASE_URL).expect(http_status_1.default.OK);
        expect(res.body).toHaveLength(1);
        expect(res.body[0]).toMatchObject(room);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEdpdGh1YlxcQWxnb29cXGJhY2tlbmRcXHNyY1xcY29udHJvbGxlcnNcXGdhbWVSb29tLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4REFBaUM7QUFDakMsNkRBQW1EO0FBQ25ELDBEQUFnQztBQUNoQyxtQ0FBbUM7QUFDbkMsK0JBQTRCO0FBRTVCLE1BQU0sUUFBUSxHQUFXLGVBQWUsQ0FBQztBQUN6QyxRQUFRLENBQUMsYUFBYSxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUU7SUFDckMsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLElBQUEsa0NBQVksRUFBQyxrQkFBUyxDQUFDLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFDSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2Isa0JBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNwQixDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxlQUFlLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDL0IsSUFBSSxHQUFHLEdBQUcsTUFBTSxJQUFBLG1CQUFPLEVBQUMsU0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxxQkFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRTdCLEdBQUcsR0FBRyxNQUFNLElBQUEsbUJBQU8sRUFBQyxTQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbkMsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztRQUV0QixHQUFHLEdBQUcsTUFBTSxJQUFBLG1CQUFPLEVBQUMsU0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxxQkFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pELE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXEdpdGh1YlxcQWxnb29cXGJhY2tlbmRcXHNyY1xcY29udHJvbGxlcnNcXGdhbWVSb29tLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cyc7XG5pbXBvcnQgeyB1c2VDb250YWluZXIgfSBmcm9tICdyb3V0aW5nLWNvbnRyb2xsZXJzJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tICd0eXBlZGknO1xuaW1wb3J0IHsgYXBwIH0gZnJvbSAnfi9hcHAnO1xuXG5jb25zdCBCQVNFX1VSTDogc3RyaW5nID0gJy9hcGkvdjEvcm9vbXMnO1xuZGVzY3JpYmUoYEJhc2UgVGVzdCAke0JBU0VfVVJMfWAsICgpID0+IHtcbiAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICB1c2VDb250YWluZXIoQ29udGFpbmVyKTtcbiAgfSk7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgQ29udGFpbmVyLnJlc2V0KCk7XG4gIH0pO1xuXG4gIHRlc3QoJ0NyZWF0ZSBhIHJvb20nLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoQkFTRV9VUkwpLmV4cGVjdChTdGF0dXMuT0spO1xuICAgIGV4cGVjdChyZXMuYm9keSkudG9FcXVhbChbXSk7XG5cbiAgICByZXMgPSBhd2FpdCByZXF1ZXN0KGFwcCkucG9zdChCQVNFX1VSTCk7XG4gICAgY29uc29sZS5sb2cocmVzLmJvZHkpO1xuICAgIGV4cGVjdChyZXMuYm9keSkudG9NYXRjaE9iamVjdCh7fSk7XG4gICAgY29uc3Qgcm9vbSA9IHJlcy5ib2R5O1xuXG4gICAgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApLmdldChCQVNFX1VSTCkuZXhwZWN0KFN0YXR1cy5PSyk7XG4gICAgZXhwZWN0KHJlcy5ib2R5KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgZXhwZWN0KHJlcy5ib2R5WzBdKS50b01hdGNoT2JqZWN0KHJvb20pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9