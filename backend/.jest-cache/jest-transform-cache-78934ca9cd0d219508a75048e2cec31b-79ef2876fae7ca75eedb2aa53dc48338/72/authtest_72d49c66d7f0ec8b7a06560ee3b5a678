2b5804b033004a69b4aca734e898b391
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const http_status_1 = __importDefault(require("http-status"));
const routing_controllers_1 = require("routing-controllers");
const supertest_1 = __importDefault(require("supertest"));
const typedi_1 = require("typedi");
const app_1 = require("~/app");
const BASE_URL = '/api/v1/auth';
describe(`Base Test ${BASE_URL}`, () => {
    beforeAll(() => {
        (0, routing_controllers_1.useContainer)(typedi_1.Container);
    });
    afterEach(() => {
        typedi_1.Container.reset();
    });
    test('Authenticate', async () => {
        await (0, supertest_1.default)(app_1.app).get(`${BASE_URL}/current`).expect(http_status_1.default.UNAUTHORIZED);
        let res = await (0, supertest_1.default)(app_1.app).post(`${BASE_URL}/`).send({
            name: 'test',
        });
        expect(res.status).toBe(http_status_1.default.OK);
        expect(typeof res.body).toBe('string');
        const jwt = res.body;
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEdpdGh1YlxcQWxnb29cXGJhY2tlbmRcXHNyY1xcY29udHJvbGxlcnNcXGF1dGgudGVzdC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLDhEQUFpQztBQUNqQyw2REFBbUQ7QUFDbkQsMERBQWdDO0FBQ2hDLG1DQUFtQztBQUNuQywrQkFBNEI7QUFFNUIsTUFBTSxRQUFRLEdBQVcsY0FBYyxDQUFDO0FBQ3hDLFFBQVEsQ0FBQyxhQUFhLFFBQVEsRUFBRSxFQUFFLEdBQUcsRUFBRTtJQUNyQyxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsSUFBQSxrQ0FBWSxFQUFDLGtCQUFTLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUMsQ0FBQztJQUNILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixrQkFBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLElBQUksRUFBRTtRQUM5QixNQUFNLElBQUEsbUJBQU8sRUFBQyxTQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxxQkFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRTFFLElBQUksR0FBRyxHQUFHLE1BQU0sSUFBQSxtQkFBTyxFQUFDLFNBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ3JELElBQUksRUFBRSxNQUFNO1NBQ2IsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMscUJBQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcR2l0aHViXFxBbGdvb1xcYmFja2VuZFxcc3JjXFxjb250cm9sbGVyc1xcYXV0aC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMnO1xuaW1wb3J0IHsgdXNlQ29udGFpbmVyIH0gZnJvbSAncm91dGluZy1jb250cm9sbGVycyc7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAndHlwZWRpJztcbmltcG9ydCB7IGFwcCB9IGZyb20gJ34vYXBwJztcblxuY29uc3QgQkFTRV9VUkw6IHN0cmluZyA9ICcvYXBpL3YxL2F1dGgnO1xuZGVzY3JpYmUoYEJhc2UgVGVzdCAke0JBU0VfVVJMfWAsICgpID0+IHtcbiAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICB1c2VDb250YWluZXIoQ29udGFpbmVyKTtcbiAgfSk7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgQ29udGFpbmVyLnJlc2V0KCk7XG4gIH0pO1xuXG4gIHRlc3QoJ0F1dGhlbnRpY2F0ZScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCByZXF1ZXN0KGFwcCkuZ2V0KGAke0JBU0VfVVJMfS9jdXJyZW50YCkuZXhwZWN0KFN0YXR1cy5VTkFVVEhPUklaRUQpO1xuXG4gICAgbGV0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5wb3N0KGAke0JBU0VfVVJMfS9gKS5zZW5kKHtcbiAgICAgIG5hbWU6ICd0ZXN0JyxcbiAgICB9KTtcbiAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZShTdGF0dXMuT0spO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzLmJvZHkpLnRvQmUoJ3N0cmluZycpO1xuICAgIGNvbnN0IGp3dCA9IHJlcy5ib2R5O1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9